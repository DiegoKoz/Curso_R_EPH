{
    "collab_server" : "",
    "contents" : "#Reiniciar R\n\nIndividual_t117 <-\n  read.table(\"Fuentes/usu_individual_t117.txt\",\n    sep = \";\",\n    dec = \",\",\n    header = TRUE,\n    fill = TRUE )\n\n### - Crear un vector que contenga los nombres de las siguientes variables de interés para realizar algunos ejercicios:\n### Edad, Sexo, Ingreso de la ocupación principal, Categoría ocupacional, ESTADO, PONDERA y PONDIH\nVariables <- c(\"ANO4\",\"TRIMESTRE\",\"CH04\",\"CH06\",\"P21\",\"ESTADO\",\"CAT_OCUP\",\"PONDERA\",\"PONDIH\")\n\n### - Acotar la Base únicamente a las variables de interés \n\nIndividual_t117 <- Individual_t117 %>% \n  select(Variables)\n\n### Calcular las tasas de actividad, empleo y desempleo según sexo, para jóvenes entre 18 y 35 años\nTasas_ej_1 <- Individual_t117 %>% \n  filter(CH06 >= 18  & CH06<= 35) %>% \n  group_by(CH04) %>% \n  summarise(Poblacion         = sum(PONDERA),\n            Ocupados          = sum(PONDERA[ESTADO == 1]),\n            Desocupados       = sum(PONDERA[ESTADO == 2]),\n            PEA               = Ocupados + Desocupados,\n            'Tasa Actividad'                  = PEA/Poblacion,\n            'Tasa Empleo'                     = Ocupados/Poblacion,\n            'Tasa Desocupacion'               = Desocupados/PEA) %>% \n  select(-c(2:5)) %>% \n  mutate(CH04 = case_when(CH04 == 1 ~ \"Hombre\",\n                          CH04 == 2 ~ \"Mujer\"))\n\n###Calcular el salario promedio por sexo, para dos grupos de edad: 18 a 35 años y 36 a 70 años.\n###Recordatorio: La base debe filtrarse para contener únicamente OCUPADOS ASALARIADOS\nTasas_ej_2 <- Individual_t117 %>% \n  mutate(GruposEdad = case_when(CH06 %in% (18:35) ~ \"18a35\",\n                                CH06 %in% (36:70) ~ \"36a70\")) %>% \n  filter(ESTADO == 1, CAT_OCUP ==3, GruposEdad %in% c(\"18a35\",\"36a70\")) %>% \n  group_by(GruposEdad,CH04) %>% \n  summarise(Salario_Medio = weighted.mean(P21,w = PONDIH)) %>% \n  mutate(CH04 = case_when(CH04 == 1 ~ \"Hombre\",\n                          CH04 == 2 ~ \"Mujer\"))\n\n\n\n###Grabar los resultados en un excel (Creando un objeto que contenga el directorio a utilizar).\nwrite.xlsx(as.data.frame(Tasas_ej_1),\n           file = \"Resultados/Ejercicios-Clase-2.xlsx\",\n           sheetName = \"Ejercicio1\",\n           row.names = FALSE,\n           append = FALSE)\n\nwrite.xlsx(as.data.frame(Tasas_ej_2),\n           file = \"Resultados/Ejercicios-Clase-2.xlsx\",\n           sheetName = \"Ejercicio2\",\n           row.names = FALSE,\n           append = TRUE)\n\n### Replicar ambos ejercicios anteriores para distintos trimestres,\n### levantando las bases desde el segundo trimestre 2016 hasta la última.\nIndividual_t216 <-\n  read.table(\n    file = \"Fuentes/usu_individual_t216.txt\",\n    sep = \";\",\n    dec = \",\",\n    header = TRUE,\n    fill = TRUE )\n\nIndividual_t316 <-\n  read.table(\n    file = \"Fuentes/usu_individual_t316.txt\",\n    sep = \";\",\n    dec = \",\",\n    header = TRUE,\n    fill = TRUE )\n\nIndividual_t416 <-\n  read.table(\n    file = \"Fuentes/usu_individual_t416.txt\",\n    sep = \";\",\n    dec = \",\",\n    header = TRUE,\n    fill = TRUE )\n\n\nTasas_ej_1b  <- bind_rows(Individual_t117 %>% select(Variables),\n                                       Individual_t216 %>% select(Variables),\n                                       Individual_t316 %>% select(Variables),\n                                       Individual_t416 %>% select(Variables)) %>% \n  filter(CH06 >= 18  & CH06<= 35) %>% \n  group_by(CH04,ANO4,TRIMESTRE) %>% \n  summarise(Poblacion         = sum(PONDERA),\n            Ocupados          = sum(PONDERA[ESTADO == 1]),\n            Desocupados       = sum(PONDERA[ESTADO == 2]),\n            PEA               = Ocupados + Desocupados,\n            'Tasa Actividad'                  = PEA/Poblacion,\n            'Tasa Empleo'                     = Ocupados/Poblacion,\n            'Tasa Desocupacion'               = Desocupados/PEA) %>% \n  select(-c(Poblacion,Ocupados,Desocupados,PEA)) %>%\n  ungroup() %>% \n  mutate(CH04 = case_when(CH04 == 1 ~ \"Hombre\",\n                          CH04 == 2 ~ \"Mujer\"))\n\n\nTasas_ej_2b <- bind_rows(Individual_t117 %>% select(Variables),\n                       Individual_t216 %>% select(Variables),\n                       Individual_t316 %>% select(Variables),\n                       Individual_t416 %>% select(Variables)) %>% \n  mutate(GruposEdad = case_when(CH06 %in% (18:35) ~ \"18a35\",\n                                CH06 %in% (36:70) ~ \"36a70\")) %>% \n  filter(ESTADO == 1, CAT_OCUP ==3, GruposEdad %in% c(\"18a35\",\"36a70\")) %>% \n  group_by(ANO4,TRIMESTRE,GruposEdad,CH04) %>% \n  summarise(Salario_Medio = weighted.mean(P21,w = PONDIH)) %>% \n  mutate(CH04 = case_when(CH04 == 1 ~ \"Hombre\",\n                          CH04 == 2 ~ \"Mujer\"))\n\n",
    "created" : 1538746676370.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3841889416",
    "id" : "1F650B72",
    "lastKnownWriteTime" : 1537115640,
    "last_content_update" : 1537115640,
    "path" : "C:/Users/gweks/Desktop/Paquetes/Carpeta del Curso R-CEPED-INDEC/Ejercicios de Clase/Ejercicios - Clase 2.R",
    "project_path" : "Ejercicios de Clase/Ejercicios - Clase 2.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}